# ุฏููู ุฅุตูุงุญ ุงูุชุณุฌูู ุนุจุฑ Supabase

ูุธูุฑ ุงูุฎุทุฃ `AuthApiError: Database error saving new user` ุฃู ุฑุณุงูุฉ `ERROR: 42P01: relation "notifications" does not exist` ุนูุฏูุง ูุง ูุชู ุชุทุจูู ูุฎุทุท Supabase ุงููุงูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช. ุงูููู ุงูุฌุฏูุฏ `supabase/migrations/20260206000000_supabase_full_reset.sql` ูุญุชูู ุนูู ุฌููุน ุงูุฌุฏุงูู ูุงูุณูุงุณุงุช ูุงููุญุงูุธ ุงููุงุฒูุฉ ูุชุดุบูู ูุธุงู DZ Taxi ุจุดูู ูุงูู ุนูู Supabase.

ุงุณุชุฎุฏู ุงูุชุนูููุงุช ุงูุชุงููุฉ ูุฅุนุงุฏุฉ ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ ุฃู ุงููุญููุฉ:

---

## ๐ง ุงุณุชุฎุฏุงู Supabase CLI

> ูุฐู ุงูุทุฑููุฉ ูู ุงูุฃุณุฑุน ุฅุฐุง ูุงู ูุฏูู ุตูุงุญูุฉ ุงููุตูู ุฅูู ุงููุดุฑูุน ุนุจุฑ CLI.

1. **ุชุณุฌูู ุงูุฏุฎูู**
   ```bash
   supabase login
   ```

2. **ุฑุจุท ุงููุดุฑูุน ุงููุญูู ุจุงููุดุฑูุน ุงูุณุญุงุจู**
   ```bash
   supabase link --project-ref YOUR_PROJECT_REF
   ```
   > ุงุณุชุจุฏู `YOUR_PROJECT_REF` ุจุงููุนุฑู ุงูุฐู ูุธูุฑ ูู ููุญุฉ Supabase (ูุซู `kobsavfggcnfemdzsnpj`).

3. **ุฏูุน ุฌููุน ุงููุฌุฑุงุช ุฏูุนุฉ ูุงุญุฏุฉ**
   ```bash
   supabase db push
   ```
   ุณูููู ูุฐุง ุงูุฃูุฑ ุจุชูููุฐ ูู ุงููููุงุช ุงูููุฌูุฏุฉ ูู `supabase/migrations` ุจูุง ูู ุฐูู ููู ุงูุฅุนุฏุงุฏ ุงููุงูู ุงูุฌุฏูุฏ.

4. **ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู** ุจุนุฏ ุงูุชูุงู ุงูุนูููุฉ ูุชุญูู ูู ูุฌุงุญ ุงูุชุณุฌูู.

---

## ๐ฅ๏ธ ุงุณุชุฎุฏุงู ููุญุฉ Supabase (SQL Editor)

> ุงุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ุฅุฐุง ูู ุชูู ุชูุถู ุฃู ูุง ุชุณุชุทูุน ุงุณุชุฎุฏุงู CLI.

1. ุงูุชุญ ููุญุฉ Supabase โ **SQL Editor** โ ุฃูุดุฆ ุงุณุชุนูุงููุง ุฌุฏูุฏูุง.
2. ุงูุณุฎ **ูุงูู** ูุญุชูู ุงูููู:
   ```
   supabase/migrations/20260206000000_supabase_full_reset.sql
   ```
3. ุงูุตู ุงููุญุชูู ูู SQL Editor ุซู ุงุถุบุท **Run**.
4. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ ุซู ุดุบูู ุงูุงุณุชุนูุงู ุงูุชุงูู ููุชุญูู ูู ูุฌูุฏ ุฌุฏูู ุงูุฅุดุนุงุฑุงุช:
   ```sql
   select * from notifications limit 1;
   ```
5. ูู ุญุงู ูู ุชุธูุฑ ุฃุฎุทุงุกุ ุฃุนุฏ ูุญุงููุฉ ุงูุชุณุฌูู ูู ุงูุชุทุจูู.

---

## โ ูุงุฐุง ููุนู ุณูุฑุจุช ุงูุฅุนุฏุงุฏ ุงููุงููุ

* ููุดุฆ ุฌุฏูู `profiles` ูุน ูุงูู ุงูุฃุนูุฏุฉ ูุงููููุฏ ุงููุทููุจุฉ ููุฃุฏูุงุฑ `passenger`, `driver`, `admin`, `developer`.
* ูุนูุฏ ุชูุนูู ุงููุญูุฒ `on_auth_user_created` ุญุชู ูุชู ุฅูุดุงุก ููู ุงููุณุชุฎุฏู ุชููุงุฆููุง ุจุนุฏ ุงูุชุณุฌูู.
* ููุดุฆ ุฌุฏูู `notifications` ุจูุงูู ุงูุฃุนูุฏุฉ (ุจูุง ูู ุฐูู `is_read`, `category`, `priority`, `status`) ููุถูู ุณูุงุณุงุช RLS ุชุณูุญ ูููุณุชุฎุฏู ุจูุฑุงุกุฉ/ุฅุฏุฎุงู ุฅุดุนุงุฑุงุชูุ ููููุณุคูููู ูุงููุทูุฑูู ุจุฅุฏุงุฑุชูุง.
* ูุถูู ูุฌูุฏ ุฌุฏุงูู `system_settings`, `admin_logs`, `vehicles`, `trips`, ู`bookings` ูุน ุฌููุน ุงูุฃุนูุฏุฉ ุงูุชู ูุนุชูุฏ ุนูููุง ุงูููุฏ.
* ููุดุฆ ุงูููุงุฑุณ ุงูุถุฑูุฑูุฉ ููุญุงูุธ ุนูู ูุธุงุฆู `set_updated_at_timestamp` ูุชุญุฏูุซ ุงูุญููู ุงูุฒูููุฉ ุชููุงุฆููุง.
* ูุถูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ูุฅุนุฏุงุฏุงุช ุงููุธุงู ุญุชู ุชุนูู ููุญุฉ ุงูุชุญูู ุฏูู ุฃุฎุทุงุก.

ุจุชุทุจูู ูุฐุง ุงูููู ูู ูุธูุฑ ุฎุทุฃ `notifications does not exist` ูุฑุฉ ุฃุฎุฑูุ ูุณุชุนูู ุนูููุฉ ุงูุชุณุฌูู ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุจุดูู ูุงูู ุนูู Supabase.

ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ ุฎุทุฃ ุฌุฏูุฏุฉ ุจุนุฏ ุงูุชูููุฐุ ุงูุณุฎ ุชูุงุตูู ุงูุฎุทุฃ ูุดุงุฑููู ุฅูุงูุง ูุณุฃุณุงุนุฏู ูู ุชุญููููุง.
