# ููุฒุฉ ุฑูุน ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ุนูุฏ ุงูุชุณุฌูู

## ๐ฏ ุงููุฏู
ุฅุถุงูุฉ ุฅููุงููุฉ ุฑูุน ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ุนูุฏ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ (ุณุงุฆู ุฃู ุฑุงูุจ) ูุญูุธูุง ูู Supabase Storage.

## โจ ุงููููุฒุงุช

### 1. **ุฑูุน ุงูุตูุฑุฉ ุนูุฏ ุงูุชุณุฌูู**
- โ ูููู ูููุณุชุฎุฏููู (ุณุงุฆููู ูุฑูุงุจ) ุฑูุน ุตูุฑุฉ ุดุฎุตูุฉ ุนูุฏ ุฅูุดุงุก ุงูุญุณุงุจ
- โ ุงูุตูุฑุฉ **ุงุฎุชูุงุฑูุฉ** - ูููู ุงูุชุณุฌูู ุจุฏูููุง
- โ ูุนุงููุฉ ููุฑูุฉ ููุตูุฑุฉ ูุจู ุงูุฑูุน

### 2. **ุงูุชุญูู ูู ุงูุตูุฑุฉ**
- โ ูุฌุจ ุฃู ุชููู ุงูุตูุฑุฉ ูู ููุน `image/*`
- โ ุงูุญุฏ ุงูุฃูุตู ููุญุฌู: **5 ููุฌุงุจุงูุช**
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ุงุฎุชูุงุฑ ููู ุบูุฑ ุตุงูุญ

### 3. **ุชุญุณูู ุงูุตูุฑุฉ**
- โ ุชุตุบูุฑ ุชููุงุฆู ููุตูุฑุฉ ุฅูู **400ร400 ุจูุณู**
- โ ุชุญููู ุฅูู ุตูุบุฉ **JPEG** ูุชูููู ุงูุญุฌู
- โ ุฌูุฏุฉ **90%** ููุญูุงุธ ุนูู ุงููุถูุญ

### 4. **ุงูุชุฎุฒูู ูู Supabase**
- โ ุญูุธ ุงูุตูุฑุฉ ูู **Supabase Storage** (bucket: `avatars`)
- โ ุงููุณุงุฑ: `{user_id}/avatar-{timestamp}.jpg`
- โ ุญูุธ ุฑุงุจุท ุงูุตูุฑุฉ ูู `profiles.avatar_url`

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏููู:

1. **ุนูุฏ ุงูุชุณุฌูู ูุฑุงูุจ:**
   - ุงุฎุชุฑ "ุฑุงูุจ"
   - ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ
   - ุงุถุบุท "ุตูุฑุฉ ุงูููู ุงูุดุฎุตู (ุงุฎุชูุงุฑู)"
   - ุงุฎุชุฑ ุตูุฑุฉ ูู ุฌูุงุฒู
   - ุดุงูุฏ ุงููุนุงููุฉ
   - ุฃููู ุงูุชุณุฌูู

2. **ุนูุฏ ุงูุชุณุฌูู ูุณุงุฆู:**
   - ุงุฎุชุฑ "ุณุงุฆู"
   - ูู **ุงูุฎุทูุฉ ุงูุฃููู** (ุงููุนูููุงุช ุงูุดุฎุตูุฉ)
   - ุงุฎุชุฑ ุตูุฑุฉ ุดุฎุตูุฉ
   - ุดุงูุฏ ุงููุนุงููุฉ
   - ุฃููู ุจุงูู ุงูุฎุทูุงุช

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### 1. **ุฏุงูุฉ ุฑูุน ุงูุตูุฑุฉ**
```typescript
const uploadAvatar = async (file: File, userId: string): Promise<string | null> => {
  // 1. ุชุตุบูุฑ ุงูุตูุฑุฉ
  const resizedBlob = await resizeImage(file, 400, 400);
  
  // 2. ุฑูุน ุฅูู Supabase Storage
  const fileName = `${userId}/avatar-${Date.now()}.jpg`;
  await supabase.storage.from('avatars').upload(fileName, resizedFile);
  
  // 3. ุงูุญุตูู ุนูู ุงูุฑุงุจุท ุงูุนุงู
  const { data } = supabase.storage.from('avatars').getPublicUrl(fileName);
  return data.publicUrl;
};
```

### 2. **ุญูุธ ุงูุฑุงุจุท ูู ุงูุจุฑููุงูู**
```typescript
if (avatarUrl) {
  await supabase
    .from('profiles')
    .update({ avatar_url: avatarUrl })
    .eq('id', createdUser.id);
}
```

### 3. **ุชูุธูู ุงููููุฐุฌ**
ุนูุฏ ูุฌุงุญ ุงูุชุณุฌููุ ูุชู ูุณุญ:
- `avatarFile` - ุงูููู ุงููุญุฏุฏ
- `avatarPreview` - ุฑุงุจุท ุงููุนุงููุฉ

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ููููุงุช ุงููุงุฌูุฉ:
```jsx
{/* Avatar Upload */}
<div className="space-y-2">
  <Label htmlFor="avatar">ุตูุฑุฉ ุงูููู ุงูุดุฎุตู (ุงุฎุชูุงุฑู)</Label>
  <div className="flex items-center gap-4">
    {avatarPreview && (
      <div className="w-20 h-20 rounded-full overflow-hidden border-2 border-primary">
        <img src={avatarPreview} alt="Preview" className="w-full h-full object-cover" />
      </div>
    )}
    <div className="flex-1">
      <Input
        id="avatar"
        type="file"
        accept="image/*"
        onChange={handleAvatarChange}
        className="cursor-pointer"
      />
      <p className="text-xs text-muted-foreground mt-1">
        PNG, JPG, GIF ุญุชู 5 ููุฌุงุจุงูุช
      </p>
    </div>
  </div>
</div>
```

## ๐ ุนุฑุถ ุงูุตูุฑุฉ ูู Dashboard

### ุงูุตูุฑุฉ ูุชุงุญุฉ ูู:
1. **Avatar Component** - ุนุฑุถ ุงูุตูุฑุฉ ุงูุฏุงุฆุฑูุฉ
2. **Profile Page** - ุงูููู ุงูุดุฎุตู ุงููุงูู
3. **Ratings Display** - ูู ุงูุชููููุงุช
4. **Trip Cards** - ูู ุจุทุงูุงุช ุงูุฑุญูุงุช

### ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:
```tsx
<Avatar>
  <AvatarImage src={profile?.avatar_url} />
  <AvatarFallback>
    {profile?.first_name?.[0]}{profile?.last_name?.[0]}
  </AvatarFallback>
</Avatar>
```

## ๐ ุงูุฃูุงู

### ุณูุงุณุงุช Supabase Storage:
```sql
-- ุงูุณูุงุญ ูููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ุจุฑูุน ุงูุตูุฑ
CREATE POLICY "Allow avatar uploads"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'avatars');

-- ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ุงูุนุงูุฉ
CREATE POLICY "Allow public avatar access"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'avatars');
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. โ **ุงูุตูุฑุฉ ุงุฎุชูุงุฑูุฉ** - ูุง ุชุคุซุฑ ุนูู ุนูููุฉ ุงูุชุณุฌูู
2. โ **ุชุตุบูุฑ ุชููุงุฆู** - ูุชุญุณูู ุงูุฃุฏุงุก
3. โ **ูุนุงููุฉ ููุฑูุฉ** - ูุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
4. โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** - ุนูุฏ ุงุฎุชูุงุฑ ููู ุบูุฑ ุตุงูุญ
5. โ **ูุนูู ููุณุงุฆููู ูุงูุฑูุงุจ** - ููุณ ุงูููุฒุฉ ููุฌููุน

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

- โ **ุฅุถุงูุฉ ุชุญุฑูุฑ ุงูุตูุฑุฉ** - ูู ุตูุญุฉ ุชุนุฏูู ุงูููู ุงูุดุฎุตู (ููุฌูุฏ ุจุงููุนู ูู EditProfile.tsx)
- โ **ุญุฐู ุงูุตูุฑุฉ ุงููุฏููุฉ** - ุนูุฏ ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ
- โ **ุถุบุท ุฃูุถู ููุตูุฑ** - ูุชุญุณูู ุงูุณุฑุนุฉ

## ๐ฆ ุงููููุงุช ุงููุญุฏุซุฉ

- `src/pages/SignUp.tsx` - ุฅุถุงูุฉ ููุฒุฉ ุฑูุน ุงูุตูุฑุฉ
- `AVATAR_UPLOAD_FEATURE.md` - ูุฐุง ุงูููู (ุงูุชูุซูู)

## โ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุฅุถุงูุฉ ููุฒุฉ ุฑูุน ุตูุฑุฉ ุงูููู ุงูุดุฎุตู ุนูุฏ ุงูุชุณุฌูู! ๐

ุงููุณุชุฎุฏููู ุงูุขู ูููููู:
- ุฑูุน ุตูุฑุฉ ุดุฎุตูุฉ ุนูุฏ ุฅูุดุงุก ุงูุญุณุงุจ
- ูุดุงูุฏุฉ ูุนุงููุฉ ููุฑูุฉ
- ุงูุตูุฑุฉ ุชูุญูุธ ุชููุงุฆูุงู ูู Supabase Storage
- ุงูุตูุฑุฉ ุชุธูุฑ ูู Dashboard ูุงูุชููููุงุช

