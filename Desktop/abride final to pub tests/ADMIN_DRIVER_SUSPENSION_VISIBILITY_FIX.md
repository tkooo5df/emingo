# ุฅุตูุงุญ ุนุฑุถ ุงูุณุงุฆููู ุงููุญุธูุฑูู ูู ููุญุฉ ุงููุฏูุฑ

## ุงููุดููุฉ
ูุงูุช ููุญุฉ ุงููุฏูุฑ ุชุนุฑุถ ููุท ุงูุฑูุงุจ (`role: 'passenger'`) ูููุณ ุงูุณุงุฆูููุ ูุฐูู ุงูุณุงุฆููู ุงููุญุธูุฑูู ุจุณุจุจ ุงูุฅูุบุงุกุงุช ูู ูุธูุฑูู ูู ููุญุฉ ุงููุฏูุฑ.

## ุงูุญู
ุชู ุชุญุฏูุซ `AdminDashboard.tsx` ููุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู (ุงูุฑูุงุจ ูุงูุณุงุฆููู) ูุน ุญุงูุฉ ุงูุฅููุงู:

### 1. ุชุญุฏูุซ ุฏุงูุฉ ุฌูุจ ุงูุจูุงูุงุช
```typescript
const fetchAllUsers = async () => {
  // ุฌูุจ ุฌููุน ุงููุณุชุฎุฏููู (ุงูุฑูุงุจ ูุงูุณุงุฆููู) ูุน ูุนูููุงุช ุงูุฅููุงู
  const { data, error } = await supabase
    .from('profiles')
    .select(`
      *,
      account_suspensions!left(
        id,
        suspended_at,
        suspension_type,
        suspension_reason,
        reactivated_at
      )
    `)
    .in('role', ['passenger', 'driver']) // ุชุบููุฑ ูู eq('role', 'passenger') ุฅูู in('role', ['passenger', 'driver'])
    .order('created_at', { ascending: false });

  // ูุนุงูุฌุฉ ุงูุจูุงูุงุช ูุชุญุฏูุฏ ุงูุญุงูุฉ ุงููุนููุฉ
  const processedUsers = data?.map(user => {
    const activeSuspension = user.account_suspensions?.find(
      (suspension: any) => !suspension.reactivated_at
    );
    
    const isActuallySuspended = user.account_suspended || !!activeSuspension;
    
    return {
      ...user,
      account_suspended: isActuallySuspended,
      suspension_details: activeSuspension
    };
  }) || [];
  
  setUsers(processedUsers);
};
```

### 2. ุฅุถุงูุฉ ุนููุฏ ููุน ุงููุณุชุฎุฏู
```typescript
<th className="hidden sm:table-cell px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
  ุงูููุน
</th>
```

### 3. ุนุฑุถ ููุน ุงููุณุชุฎุฏู ูุงูุญุงูุฉ
```typescript
<td className="hidden sm:table-cell px-6 py-4 whitespace-nowrap">
  <div className="flex flex-col gap-1">
    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
      user.role === 'driver' 
        ? 'bg-blue-100 text-blue-800' 
        : 'bg-purple-100 text-purple-800'
    }`}>
      {user.role === 'driver' ? 'ุณุงุฆู' : 'ุฑุงูุจ'}
    </span>
    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
      user.account_suspended 
        ? 'bg-red-100 text-red-800' 
        : 'bg-green-100 text-green-800'
    }`}>
      {user.account_suspended ? 'ููููู' : 'ูุดุท'}
    </span>
    {user.suspension_details && (
      <span className="text-xs text-gray-500">
        {user.suspension_details.suspension_type === 'cancellation_limit' ? 'ุฅูุบุงุกุงุช' : 'ูุฏูู'}
      </span>
    )}
  </div>
</td>
```

### 4. ุชุญุฏูุซ ุงููุตูุต ูุงููุงุฌูุฉ
- โ ุชุบููุฑ "ุงูุฑูุงุจ" ุฅูู "ุงููุณุชุฎุฏููู"
- โ ุชุบููุฑ "ุฅุฏุงุฑุฉ ุงูุฑูุงุจ" ุฅูู "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู"
- โ ุชุญุฏูุซ ุฌููุน ุงููุชุบูุฑุงุช ูู `passengers` ุฅูู `users`
- โ ุชุญุฏูุซ ุฌููุน ุงูุฏูุงู ูุชุชุนุงูู ูุน ุงููุณุชุฎุฏููู ุจุฏูุงู ูู ุงูุฑูุงุจ ููุท

## ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- โ ูุนุฑุถ ุงูุฑูุงุจ ูุงูุณุงุฆููู ูู ููุณ ุงูุฌุฏูู
- โ ููุถุญ ููุน ุงููุณุชุฎุฏู (ุณุงุฆู/ุฑุงูุจ) ุจุฃููุงู ูุฎุชููุฉ
- ๐ต **ุณุงุฆู** - ุฃุฒุฑู
- ๐ฃ **ุฑุงูุจ** - ุจููุณุฌู

### 2. ุญุงูุฉ ุงูุฅููุงู ุงูุฏูููุฉ
- โ ูุนุฑุถ ุงูุญุงูุฉ ุงููุนููุฉ (ูุดุท/ููููู)
- โ ููุถุญ ุณุจุจ ุงูุฅููุงู (ุฅูุบุงุกุงุช/ูุฏูู)
- ๐ข **ูุดุท** - ุฃุฎุถุฑ
- ๐ด **ููููู** - ุฃุญูุฑ

### 3. ุฅุฏุงุฑุฉ ุดุงููุฉ
- โ ุงููุฏูุฑ ููููู ุฅููุงู/ุชูุนูู ุฃู ูุณุชุฎุฏู
- โ ูุนูู ูุน ุงููุธุงู ุงูุฌุฏูุฏ ููุฅููุงูุงุช ุงูุชููุงุฆูุฉ
- โ ูุนุฑุถ ุงูุณุงุฆููู ุงููุญุธูุฑูู ุจุณุจุจ ุงูุฅูุบุงุกุงุช

## ููููุฉ ุงูุงุณุชุฎุฏุงู

1. **ุงุฐูุจ ุฅูู ููุญุฉ ุงููุฏูุฑ:** `/admin/dashboard`
2. **ุงูุชูู ุฅูู ุชุจููุจ "ุงููุณุชุฎุฏููู"**
3. **ุณุชุฑู ุฌููุน ุงููุณุชุฎุฏููู:**
   - ๐ต **ุณุงุฆู** - ุงูุณุงุฆููู
   - ๐ฃ **ุฑุงูุจ** - ุงูุฑูุงุจ
4. **ุงูุญุงูุฉ:**
   - ๐ข **ูุดุท** - ุงูุญุณุงุจ ูุนูู ุจุดูู ุทุจูุนู
   - ๐ด **ููููู** - ุงูุญุณุงุจ ููููู (ูุน ุณุจุจ ุงูุฅููุงู)
5. **ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ:**
   - **ุชูุนูู** - ูุฅุนุงุฏุฉ ุชูุนูู ุงูุญุณุงุจ ุงูููููู
   - **ุฅููุงู** - ูุฅููุงู ุงูุญุณุงุจ ุงููุดุท

## ุงููุชูุฌุฉ
ุงูุขู ููุญุฉ ุงููุฏูุฑ ุชุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู (ุงูุฑูุงุจ ูุงูุณุงุฆููู) ูุน ุงูุญุงูุฉ ุงูุญููููุฉ ูุงูุฏูููุฉ ููู ุญุณุงุจุ ุจูุง ูู ุฐูู ุงูุณุงุฆููู ุงููุญุธูุฑูู ุจุณุจุจ ุงูุฅูุบุงุกุงุช.
