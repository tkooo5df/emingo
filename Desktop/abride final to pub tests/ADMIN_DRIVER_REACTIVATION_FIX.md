# ุฅุตูุงุญ ูุดููุฉ ุฅูุบุงุก ุญุธุฑ ุงูุณุงุฆู ูู ููุญุฉ ุงููุฏูุฑ

## ุงููุดููุฉ
ุงูุณุงุฆู "swag lwal" ูุงู ูุญุธูุฑุงู ุจุณุจุจ ุงูุฅูุบุงุกุงุช ููู ูุณุชุทุน ุงููุฏูุฑ ุฅูุบุงุก ุงูุญุธุฑ ูู ููุญุฉ ุงููุฏูุฑ.

## ุงูุชุดุฎูุต
ุจุนุฏ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุฌุฏุช ุฃู ุงูุณุงุฆู ูุงู ูุฏูู:

### 1. ุญุงูุฉ ุงูุญุณุงุจ
```sql
-- ุฌุฏูู profiles
account_suspended: true
is_verified: true (ููุณุงุฆููู)
```

### 2. ุฅููุงูุงุช ูุชุนุฏุฏุฉ
```sql
-- ุฌุฏูู account_suspensions
10 ุฅููุงูุงุช ูุชุนุฏุฏุฉ ุจุณุจุจ ุงูุฅูุบุงุกุงุช
ุฌููุนูุง reactivated_at: null (ูู ูุชู ุฅูุบุงุคูุง)
```

## ุงูุญู

### 1. ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
```sql
-- ุชุดุบูู ุฏุงูุฉ ุฅุนุงุฏุฉ ุงูุชูุนูู
SELECT reactivate_user_account(
  'b7ed3c49-7645-4d27-87ed-d03d1f7660d5', 
  'ุชู ุฅุนุงุฏุฉ ุชูุนูู ุงูุญุณุงุจ ูู ูุจู ุงููุฏูุฑ', 
  'd7c0d878-0415-4c1b-a54e-4a2985ed51f5'
);
```

### 2. ุงููุชูุฌุฉ
```sql
-- ุจุนุฏ ุงูุฅุตูุงุญ
account_suspended: false โ
is_user_suspended: false โ
ุฌููุน ุงูุฅููุงูุงุช ุชู ุฅูุบุงุคูุง โ
```

### 3. ุชุญุณูู ุฏุงูุฉ toggleUserStatus
```typescript
const toggleUserStatus = async (userId: string, currentStatus: boolean) => {
  try {
    if (newStatus) {
      // ุฅููุงู ุงูุญุณุงุจ
      await supabase
        .from('profiles')
        .update({ account_suspended: true })
        .eq('id', userId);
    } else {
      // ุฅุนุงุฏุฉ ุชูุนูู ุงูุญุณุงุจ ูุน ุชุณุฌูู ููุตู
      console.log('๐ Attempting to reactivate account via RPC...');
      
      const { data: reactivateResult, error: reactivateError } = await (supabase as any).rpc('reactivate_user_account', {
        user_id: userId,
        reactivation_reason: 'ุชู ุฅุนุงุฏุฉ ุชูุนูู ุงูุญุณุงุจ ูู ูุจู ุงููุฏูุฑ',
        reactivated_by: user?.id
      });

      if (reactivateError) {
        console.error('๐ด Reactivation error:', reactivateError);
        throw reactivateError;
      }

      console.log('โ Account reactivated successfully:', reactivateResult);
      toast.success('ุชู ุชูุนูู ุงูุญุณุงุจ ุจูุฌุงุญ');
    }

    // ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช
    await fetchAllUsers();
  } catch (error) {
    console.error('โ Error toggling user status:', error);
    toast.error(`ุญุฏุซ ุฎุทุฃ ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุญุณุงุจ: ${error.message || 'ุฎุทุฃ ุบูุฑ ูุนุฑูู'}`);
  }
};
```

## ุงููููุฒุงุช ุงููุญุณูุฉ

### 1. ุชุณุฌูู ููุตู
- โ ุชุณุฌูู ูู ุฎุทูุฉ ูู ุนูููุฉ ุฅุนุงุฏุฉ ุงูุชูุนูู
- โ ุนุฑุถ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุชูุตูููุฉ
- โ ุชุณุฌูู ูุชุงุฆุฌ ุงูุนูููุงุช

### 2. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ุชุณุฌูู ููุตู ููุฃุฎุทุงุก ูู ุงููููุณูู
- โ ูุนุงูุฌุฉ ุฌููุน ุฃููุงุน ุงูุฃุฎุทุงุก

### 3. ุชุญุฏูุซ ุชููุงุฆู
- โ ุฅุนุงุฏุฉ ุชุญููู ุงูุจูุงูุงุช ุจุนุฏ ูู ุนูููุฉ
- โ ุนุฑุถ ุงูุชุญุฏูุซุงุช ููุฑุงู
- โ ุชุฃููุฏ ูุฌุงุญ ุงูุนูููุฉ

## ููููุฉ ุงูุงุณุชุฎุฏุงู

1. **ุงุฐูุจ ุฅูู ููุญุฉ ุงููุฏูุฑ:** `/admin/dashboard`
2. **ุงูุชูู ุฅูู ุชุจููุจ "ุงููุณุชุฎุฏููู"**
3. **ุงุจุญุซ ุนู ุงูุณุงุฆู "swag lwal"**
4. **ุณุชุฑู ุงูุขู:**
   - ๐ต **ุณุงุฆู** - ููุน ุงููุณุชุฎุฏู
   - ๐ข **ูุดุท** - ุญุงูุฉ ุงูุญุณุงุจ (ุชู ุฅุตูุงุญูุง)
5. **ููููู ุงูุขู:**
   - **ุฅููุงู** ุงูุญุณุงุจ ุฅุฐุง ุฃุฑุฏุช
   - **ุชูุนูู** ุงูุญุณุงุจ ุฅุฐุง ูุงู ูููููุงู

## ุงููุชูุฌุฉ
โ **ุงูุณุงุฆู "swag lwal" ุงูุขู ูุดุท ูููููู ุงูุนูู ุจุดูู ุทุจูุนู**
โ **ุงููุฏูุฑ ููููู ุฅุฏุงุฑุฉ ุฌููุน ุงููุณุชุฎุฏููู ุจุณูููุฉ**
โ **ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ูุน ุชุณุฌูู ููุตู**

## ููุงุญุธุฉ ูููุฉ
ุฅุฐุง ูุงุฌูุช ูุดููุฉ ููุงุซูุฉ ูู ุงููุณุชูุจูุ ููููู:
1. ุงูุชุญูู ูู ุงููููุณูู ูุฑุคูุฉ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูููุตูุฉ
2. ุงุณุชุฎุฏุงู ุฏุงูุฉ `reactivate_user_account` ูุจุงุดุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุงูุชุญูู ูู ุฌุฏูู `account_suspensions` ููุชุฃูุฏ ูู ุญุงูุฉ ุงูุฅููุงูุงุช
