# ุชุดุฎูุต ูุดููุฉ ุนุฏู ุธููุฑ ุงูุฃุณูุงุก ูุงูุตูุฑ ูู ุงูุชููููุงุช

## ๐จ ุงููุดููุฉ:
ุงูููุฏ ูุง ูุฃุฎุฐ ุงุณู ุงููุณุชุฎุฏู ููุง ูุฃุฎุฐ ุตูุฑุฉ ุงูู avatar ุงูุฎุงุต ุจู ููุถุนูุง ูู ุงูุชููููุงุช ูู ููู ุงูุณุงุฆู.

## ๐ ุงูุชุดุฎูุต:

### **ุงูุฎุทูุฉ 1: ูุญุต ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ**
ุดุบู `database/check_profiles_data.sql` ูู Supabase SQL Editor ููุญุต:

1. **ุฌุฏูู profiles** - ูู ูุญุชูู ุนูู `full_name` ู `avatar_url`ุ
2. **ุฌุฏูู ratings** - ูู ูุฑุชุจุท ุจุดูู ุตุญูุญ ูุน `profiles`ุ
3. **ุงููุทุงุจูุฉ** - ูู `passenger_id` ูู `ratings` ูุทุงุจู `id` ูู `profiles`ุ

### **ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ**
ุดุบู `database/test_ratings_function.sql` ูู Supabase SQL Editor ูุงุฎุชุจุงุฑ:

1. **ุฅูุดุงุก ุงูุฏุงูุฉ** - ูุน ุฑุจุท ุตุญูุญ ููุจูุงูุงุช
2. **ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ** - ูุน ูุนุฑู ุณุงุฆู ุญูููู
3. **ูุญุต ุงููุชุงุฆุฌ** - ููุชุฃูุฏ ูู ุธููุฑ ุงูุฃุณูุงุก ูุงูุตูุฑ

## ๐ฏ ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

### **1. ุจูุงูุงุช ูุงุฑุบุฉ ูู profiles**
- `full_name` ูุงุฑุบ ุฃู NULL
- `avatar_url` ูุงุฑุบ ุฃู NULL
- ูุง ุชูุฌุฏ ูุทุงุจูุฉ ุจูู `ratings.passenger_id` ู `profiles.id`

### **2. ูุดููุฉ ูู ุฑุจุท ุงูุฌุฏุงูู**
- `LEFT JOIN` ูุง ูุนูู ุจุดูู ุตุญูุญ
- `passenger_id` ูู `ratings` ูุง ูุทุงุจู `id` ูู `profiles`

### **3. ูุดููุฉ ูู ุจูุงุก ุฑุงุจุท ุงูุตูุฑุฉ**
- ุฑุงุจุท Storage ุบูุฑ ุตุญูุญ
- ุงุณู ุงูู bucket ุบูุฑ ุตุญูุญ

## โ ุงูุญููู:

### **ุงูุญู 1: ูุญุต ุงูุจูุงูุงุช**
```sql
-- ูุญุต ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
SELECT 
    r.id as rating_id,
    r.passenger_id,
    p.full_name,
    p.avatar_url,
    p.email
FROM ratings r
LEFT JOIN profiles p ON r.passenger_id = p.id
LIMIT 5;
```

### **ุงูุญู 2: ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููููุฏุฉ**
```sql
-- ุชุญุฏูุซ ุงูุฃุณูุงุก ุงูููููุฏุฉ
UPDATE profiles 
SET full_name = COALESCE(full_name, 'ูุณุชุฎุฏู ' || SUBSTRING(id::text, 1, 8))
WHERE full_name IS NULL OR full_name = '';

-- ุชุญุฏูุซ ุงูุตูุฑ ุงูููููุฏุฉ (ุงุฎุชูุงุฑู)
UPDATE profiles 
SET avatar_url = 'default-avatar.jpg'
WHERE avatar_url IS NULL OR avatar_url = '';
```

### **ุงูุญู 3: ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ**
```sql
-- ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ ูุน ูุนุฑู ุณุงุฆู ุญูููู
SELECT * FROM get_driver_ratings('ูุนุฑู-ุงูุณุงุฆู-ุงูุญูููู');
```

## ๐ ุฎุทูุงุช ุงูุชุดุฎูุต:

### **1. ูุญุต ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ**
- ุดุบู `database/check_profiles_data.sql`
- ุชุญูู ูู ูุฌูุฏ `full_name` ู `avatar_url`
- ุชุญูู ูู ุงููุทุงุจูุฉ ุจูู ุงูุฌุฏุงูู

### **2. ุงุฎุชุจุงุฑ ุงูุฏุงูุฉ**
- ุดุบู `database/test_ratings_function.sql`
- ุงุณุชุฎุฏู ูุนุฑู ุณุงุฆู ุญูููู
- ุชุญูู ูู ุงููุชุงุฆุฌ

### **3. ูุญุต Console ูู ุงูุชุทุจูู**
- ุงูุชุญ Developer Tools (F12)
- ุงูุชูู ุฅูู Console
- ุงุจุญุซ ุนู ุฑุณุงุฆู `DriverRatingsDisplay`
- ุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

### **ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ููุฌูุฏุฉ:**
- โ **ุฃุณูุงุก ุญููููุฉ** ููุฑูุงุจ
- โ **ุตูุฑ ุญููููุฉ** ูู Storage
- โ **ูุนูููุงุช ูุงููุฉ** ูู ุงูุชููููุงุช

### **ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ููููุฏุฉ:**
- โ **"ุฑุงูุจ"** ุจุฏูุงู ูู ุงูุงุณู ุงูุญูููู
- โ **ุฃููููุฉ ุงูุชุฑุงุถูุฉ** ุจุฏูุงู ูู ุงูุตูุฑุฉ
- โ **ูุนูููุงุช ูุงูุตุฉ** ูู ุงูุชููููุงุช

## ๐ ุงูุญู ุงูุณุฑูุน:

### **ุฅุฐุง ูุงูุช ุงููุดููุฉ ูู ุงูุจูุงูุงุช:**
1. **ุดุบู `database/check_profiles_data.sql`** ููุญุต ุงูุจูุงูุงุช
2. **ุญุฏุซ ุงูุจูุงูุงุช ุงูููููุฏุฉ** ุจุงุณุชุฎุฏุงู UPDATE
3. **ุงุฎุชุจุฑ ุงูุฏุงูุฉ** ูุน ุงูุจูุงูุงุช ุงููุญุฏุซุฉ

### **ุฅุฐุง ูุงูุช ุงููุดููุฉ ูู ุงูููุฏ:**
1. **ุดุบู `database/test_ratings_function.sql`** ูุงุฎุชุจุงุฑ ุงูุฏุงูุฉ
2. **ุชุญูู ูู Console** ูู ุงูุชุทุจูู
3. **ูุญุต ุฑุณุงุฆู ุงูุฎุทุฃ** ุฅุฐุง ูุฌุฏุช

## ๐ ููุงุญุธุงุช ูููุฉ:

- โ **ูุญุต ุดุงูู** - ููุจูุงูุงุช ูุงูููุฏ
- โ **ุงุฎุชุจุงุฑ ููุตู** - ูุน ุจูุงูุงุช ุญููููุฉ
- โ **ุฑุณุงุฆู ุชุดุฎูุต** - ูุงุถุญุฉ ููููุฏุฉ
- โ **ุญููู ูุชุนุฏุฏุฉ** - ุญุณุจ ููุน ุงููุดููุฉ

## ๐ ุงููุชูุฌุฉ:

ุจุนุฏ ุงูุชุดุฎูุต ูุงูุญู:
- โ **ุฃุณูุงุก ุญููููุฉ** ููุฑูุงุจ ูู ุงูุชููููุงุช
- โ **ุตูุฑ ุญููููุฉ** ูู Supabase Storage
- โ **ูุนูููุงุช ูุงููุฉ** ูููุตูุฉ
- โ **ุนุฑุถ ูุญุณู** ููุชููููุงุช

**ุดุบู `database/check_profiles_data.sql` ุฃููุงู ููุนุฑูุฉ ุงูุณุจุจ ุงูุฏููู!** ๐
