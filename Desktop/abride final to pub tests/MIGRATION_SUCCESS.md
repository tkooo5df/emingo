# โ ุชู ุชุทุจูู Migration ุจูุฌุงุญ!

## ุงููุดููุฉ
โ `Error: Failed to run sql query: ERROR: 42501: must be owner of table objects`

## ุงูุณุจุจ
ูุงู Migration ูุญุงูู ุงุณุชุฎุฏุงู `ALTER TABLE storage.objects ENABLE ROW LEVEL SECURITY;` ููุฐุง ูุชุทูุจ ุตูุงุญูุงุช owner ุนูู ุฌุฏูู ุงููุธุงู.

## ุงูุญู
โ **ุชู ุฅุฒุงูุฉ `ALTER TABLE`** ูุฃู RLS ููุนูู ุงูุชุฑุงุถูุงู ุนูู `storage.objects` ูู Supabase.

## โ Migration ุงููุทุจู

ุชู ุชุทุจูู Migration ุจูุฌุงุญ ุนุจุฑ Supabase MCP:
- โ **ุงุณู Migration:** `fix_avatar_rls_final`
- โ **ุงูุญุงูุฉ:** Success
- โ **ุงูุณูุงุณุงุช:** ุชู ุฅูุดุงุคูุง ุจูุฌุงุญ

## ๐ ุงูุณูุงุณุงุช ุงููุทุจูุฉ

1. โ **Avatar upload for authenticated users** (INSERT)
   - ุงูุณูุงุญ ูุฌููุน ุงููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ุจุฑูุน ุงูุตูุฑ

2. โ **Avatar read for all** (SELECT)
   - ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ุงูุนุงูุฉ ููุตูุฑ

3. โ **Avatar update for owner** (UPDATE)
   - ุงูุณูุงุญ ูููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ุจุชุญุฏูุซ ุงูุตูุฑ

4. โ **Avatar delete for owner** (DELETE)
   - ุงูุณูุงุญ ูููุณุชุฎุฏููู ุงููุตุงุฏู ุนูููู ุจุญุฐู ุงูุตูุฑ

## โ ุงููุชูุฌุฉ

ุงูุขู ูุฌุจ ุฃู ุชุนูู ุฑูุน ุงูุตูุฑ ุจุฏูู ูุดุงูู:
- โ ุงููุณุชุฎุฏููู ุงููุตุงุฏููู ุนูููู ูููููู ุฑูุน ุงูุตูุฑ
- โ ุงูุฌููุน ูููููู ูุฑุงุกุฉ ุงูุตูุฑ (public)
- โ ุงููุณุชุฎุฏููู ุงููุตุงุฏููู ุนูููู ูููููู ุชุญุฏูุซ/ุญุฐู ุงูุตูุฑ

## ๐งช ุงูุงุฎุชุจุงุฑ

1. ุณุฌูู ุญุณุงุจ ุฌุฏูุฏ (ุณุงุฆู ุฃู ุฑุงูุจ)
2. ุงุฎุชุฑ ุตูุฑุฉ ููููู ุงูุดุฎุตู
3. ุฃููู ุงูุชุณุฌูู
4. ูุฌุจ ุฃู ุชูุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ โ

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2025-01-19  
**ุงูุญุงูุฉ:** โ ููุชูู - Migration ูุทุจู ุจูุฌุงุญ

