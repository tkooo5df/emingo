# ๐บ๏ธ ุฅุตูุงุญ: ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ

## ๐ ุงููุดููุฉ

ุนูุฏ ูุชุญ `/driver-map`ุ ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ ูููุงู - ููุท ูุฑุจุน ูุงุฑุบ ุฃู ุฑูุงุฏู.

---

## โ ุงูุญู ุงููุทุจู

### ุงููุดููุฉ ุงูุฃุณุงุณูุฉ:

ูุงูุช ููุชุจุงุช Leaflet **ุบูุฑ ูุซุจุชุฉ** ุฑุบู ุฃู ุงูููุฏ ูุณุชุฎุฏููุง!

```typescript
// โ ุงูููุฏ ูุณุชุฎุฏู react-leaflet
import { MapContainer, TileLayer } from "react-leaflet";
import L from "leaflet";

// โ ููู ุงูููุชุจุงุช ุบูุฑ ูุซุจุชุฉ!
npm list leaflet โ (empty)
```

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงูุชู ุชูุช

### 1. ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ โ

```bash
npm install leaflet react-leaflet leaflet-routing-machine
```

**ูุง ุชู ุชุซุจูุชู**:
- `leaflet` โ ููุชุจุฉ ุงูุฎุฑุงุฆุท ุงูุฃุณุงุณูุฉ
- `react-leaflet` โ ููุชุจุฉ React ููุฎุฑุงุฆุท
- `leaflet-routing-machine` โ ูุฑุณู ุงููุณุงุฑุงุช

### 2. ุฅุถุงูุฉ CSS ุงููุทููุจ โ

```typescript
// ูุจู โ
import L from "leaflet";

// ุจุนุฏ โ
import L from "leaflet";
import "leaflet/dist/leaflet.css";  // ููู ุฌุฏุงู!
```

**ููุงุฐุง CSS ูููุ**
- ุจุฏูู CSSุ ุงูุฎุฑูุทุฉ ูู ุชุธูุฑ ุจุดูู ุตุญูุญ
- ุงูุนูุงุตุฑ ุณุชููู ุจุฏูู ุชูุณูู
- ุงูุฃููููุงุช ูุฏ ูุง ุชุธูุฑ

---

## ๐ฏ ููู ุชุนูู ุงูุฎุฑูุทุฉ ุงูุขูุ

### ุงูููููุงุช ุงูุฃุณุงุณูุฉ:

```typescript
<MapContainer
  center={[36.7538, 3.0588]}  // ูุฑูุฒ ุงูุฎุฑูุทุฉ (ุงูุฌุฒุงุฆุฑ)
  zoom={13}                    // ูุณุชูู ุงูุชูุฑูุจ
  className="w-full h-[80vh]"  // ุงูุญุฌู ุงููุงูู
>
  {/* ุทุจูุฉ ุงูุฎุฑูุทุฉ ูู OpenStreetMap */}
  <TileLayer
    attribution='&copy; OpenStreetMap contributors'
    url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
  />
  
  {/* ูููุน ุงูุณุงุฆู */}
  <Marker position={[lat, lng]} icon={driverIcon}>
    <Popup>ูููุนู</Popup>
  </Marker>
</MapContainer>
```

---

## ๐ ูุจู ูุจุนุฏ ุงูุฅุตูุงุญ

### ูุจู โ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                 โ
โ                                 โ
โ      [ูุฑุจุน ูุงุฑุบ ุฑูุงุฏู]          โ
โ                                 โ
โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Console:
  Error: Cannot find module 'leaflet'
  Error: Cannot find module 'react-leaflet'
```

### ุจุนุฏ โ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐บ๏ธ ุฎุฑูุทุฉ ุงูุฌุฒุงุฆุฑ               โ
โ                                 โ
โ     [ุฎุฑูุทุฉ ุชูุงุนููุฉ]             โ
โ     ๐ ูููุนู                    โ
โ     + - ๐                      โ
โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Console:
  โ No errors
```

---

## ๐ ููููุฉ ุงูุชุญูู ูู ุงูุนูู

### ุงูุฎุทูุฉ 1: ุงูุชุญ ุงูุฎุฑูุทุฉ

```
http://localhost:5173/driver-map
```

### ุงูุฎุทูุฉ 2: ุชุญูู ูู ุงูุฃููุฑ ุงูุชุงููุฉ

โ **ุงูุฎุฑูุทุฉ ุชุธูุฑ**:
- ูุฌุจ ุฃู ุชุฑู ุฎุฑูุทุฉ ุชูุงุนููุฉ
- ููููู ุงูุชูุจูุฑ/ุงูุชุตุบูุฑ (+/-)
- ููููู ุงูุณุญุจ ูุชุญุฑูู ุงูุฎุฑูุทุฉ

โ **ุฃุฒุฑุงุฑ ุงูุชุญูู ุชุธูุฑ**:
- ุฒุฑ + ููุชูุจูุฑ
- ุฒุฑ - ููุชุตุบูุฑ  
- ุฒุฑ โถ ููุดุงุดุฉ ุงููุงููุฉ

โ **ุงูุฃููููุงุช ุชุธูุฑ**:
- ุฃููููุฉ ูููุนู (ุฅุฐุง ุจุฏุฃุช ุงูุชุชุจุน)
- ุฃููููุงุช ุงูุญุฌูุฒุงุช (ุฅู ูุฌุฏุช)

### ุงูุฎุทูุฉ 3: ุงูุชุญ Console (F12)

**ูุง ูุฌุจ ุฃู ุชุฑู**:
- โ Cannot find module errors
- โ Failed to load resource errors
- โ CSS errors

**ูุฌุจ ุฃู ุชุฑู**:
- โ Leaflet map loaded
- โ Tiles loading successfully

---

## ๐ ูุดุงูู ุดุงุฆุนุฉ ุจุนุฏ ุงูุฅุตูุงุญ

### ุงููุดููุฉ 1: ุงูุฎุฑูุทุฉ ุฑูุงุฏูุฉ ูุงุฑุบุฉ

**ุงูุณุจุจ**: Tiles ูุง ุชูุญููู (ูุดููุฉ ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช)

**ุงูุญู**:
```
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุฌุฑูุจ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ (Ctrl+F5)
3. ุชุญูู ูู Console ููุฃุฎุทุงุก
```

### ุงููุดููุฉ 2: ุงูุฃููููุงุช ูุง ุชุธูุฑ

**ุงูุณุจุจ**: CDN ููุฃููููุงุช ูุง ูุนูู

**ุงูุญู**: 
ุงูููุฏ ูุณุชุฎุฏู CDN ุจุงููุนู:
```typescript
L.Icon.Default.mergeOptions({
  iconUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",
  // ...
});
```

ุฅุฐุง ูู ูุนููุ ุชุญูู ูู ุงูุฅูุชุฑูุช.

### ุงููุดููุฉ 3: ุงูุฎุฑูุทุฉ ุตุบูุฑุฉ ุฌุฏุงู

**ุงูุณุจุจ**: CSS ุบูุฑ ูุญููู ุจุดูู ุตุญูุญ

**ุงูุญู**:
```
1. ุชุฃูุฏ ูู import "leaflet/dist/leaflet.css"
2. ุชุญูู ูู className="w-full h-[80vh]"
3. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู (npm run dev)
```

### ุงููุดููุฉ 4: ุงูุฎุฑูุทุฉ ุจุทูุฆุฉ

**ุงูุณุจุจ**: ูุซุฑุฉ ุงูู markers ุฃู ุงูุชุญุฏูุซุงุช ุงููุชูุฑุฑุฉ

**ุงูุญู**:
```
- ุชูููู ุนุฏุฏ ุงูู markers ุงููุนุฑูุถุฉ
- ุฒูุงุฏุฉ interval ุงูุชุญุฏูุซ ูู 5s ุฅูู 10s
- ุงุณุชุฎุฏุงู clustering ููู markers
```

---

## ๐จ ุชุฎุตูุต ุงูุฎุฑูุทุฉ

### ุชุบููุฑ ุงูููุท:

```typescript
// OpenStreetMap (ุงูุชุฑุงุถู) โ
url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"

// ุฎุฑูุทุฉ ุฏุงููุฉ ๐
url="https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png"

// ุฎุฑูุทุฉ ููุฑ ุตูุงุนู ๐ฐ๏ธ
url="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
```

### ุชุบููุฑ ุงููุฑูุฒ:

```typescript
// ุงูุฌุฒุงุฆุฑ ุงูุนุงุตูุฉ
center={[36.7538, 3.0588]}

// ุบุฑุฏุงูุฉ
center={[32.4913, 3.6745]}

// ููุฑุงู
center={[35.6969, -0.6331]}
```

### ุชุบููุฑ ุงูู Zoom:

```typescript
zoom={6}   // ุฏููุฉ ูุงููุฉ
zoom={12}  // ูุฏููุฉ
zoom={15}  // ุญู
zoom={18}  // ุดุงุฑุน
```

---

## ๐ฆ ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ

### 1. Leaflet
```
ุงููุณุฎุฉ: ^1.9.4
ุงูุงุณุชุฎุฏุงู: ููุชุจุฉ ุงูุฎุฑุงุฆุท ุงูุฃุณุงุณูุฉ
ุงูุญุฌู: ~140KB
ุงูุชุฑุฎูุต: BSD-2-Clause
```

### 2. React-Leaflet
```
ุงููุณุฎุฉ: ^4.2.1
ุงูุงุณุชุฎุฏุงู: ููููุงุช React ููุฎุฑุงุฆุท
ุงูุญุฌู: ~50KB
ุงูุชุฑุฎูุต: MIT
```

### 3. Leaflet-Routing-Machine
```
ุงููุณุฎุฉ: ^3.2.12
ุงูุงุณุชุฎุฏุงู: ุฑุณู ุงููุณุงุฑุงุช ูุงูุงุชุฌุงูุงุช
ุงูุญุฌู: ~60KB
ุงูุชุฑุฎูุต: MIT
```

**ุงูุญุฌู ุงูุฅุฌูุงูู**: ~250KB (ูุถุบูุท)

---

## ๐ ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. Lazy Loading ููุฎุฑูุทุฉ

```typescript
import { lazy, Suspense } from 'react';

const DriverMap = lazy(() => import('@/components/driver/DriverMap'));

<Suspense fallback={<div>Loading map...</div>}>
  <DriverMap />
</Suspense>
```

### 2. Debounce ููุชุญุฏูุซุงุช

```typescript
// ุชุญุฏูุซ ูู 10 ุซูุงูู ุจุฏูุงู ูู 5
setInterval(updateLocation, 10000);
```

### 3. ุชูููู ุนุฏุฏ ุงูู Markers

```typescript
// ุนุฑุถ ุขุฎุฑ 10 ุญุฌูุฒุงุช ููุท
const recentBookings = passengers.slice(0, 10);
```

---

## โ ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅุตูุงุญู:

1. โ ุชุซุจูุช `leaflet` ู `react-leaflet` ู `leaflet-routing-machine`
2. โ ุฅุถุงูุฉ `import "leaflet/dist/leaflet.css"`
3. โ ุชููุฆุฉ ุงูุฃููููุงุช ุงูุงูุชุฑุงุถูุฉ
4. โ ุฅุนุฏุงุฏ TileLayer ูู OpenStreetMap

### ุงููุชูุฌุฉ:

```
ูุจู:
โ ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ
โ ุฃุฎุทุงุก ูู Console
โ ุงููุณุชุฎุฏู ูุญุชุงุฑ

ุจุนุฏ:
โ ุงูุฎุฑูุทุฉ ุชุธูุฑ ุจุดูู ุฌููู
โ ุชูุงุนููุฉ ูุณูุณุฉ
โ ุจุฏูู ุฃุฎุทุงุก
โ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู!
```

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [Leaflet Docs](https://leafletjs.com/)
- [React-Leaflet Docs](https://react-leaflet.js.org/)
- [OpenStreetMap](https://www.openstreetmap.org/)
- [Leaflet Plugins](https://leafletjs.com/plugins.html)

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 28 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ**: โ ุชู ุงูุฅุตูุงุญ  
**ุงููููุงุช ุงููุนุฏูุฉ**:
- `package.json` (ุชุซุจูุช ุงูููุชุจุงุช)
- `src/components/driver/DriverMap.tsx` (ุฅุถุงูุฉ CSS import)

