# Ø®Ø·ÙˆØ§Øª Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª

## ðŸš¨ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
Ø¬Ø¯ÙˆÙ„ `ratings` ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.

## âœ… Ø§Ù„Ø­Ù„:

### **Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ ratings**
Ø§Ù†Ø³Ø® ÙˆØ§Ù„ØµÙ‚ `database/create_ratings_table.sql` ÙÙŠ Supabase SQL Editor:

```sql
-- Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
CREATE TABLE IF NOT EXISTS ratings (
    id SERIAL PRIMARY KEY,
    booking_id INTEGER NOT NULL REFERENCES bookings(id) ON DELETE CASCADE,
    driver_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
    passenger_id UUID NOT NULL REFERENCES profiles(id) ON DELETE CASCADE,
    rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
    comment TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### **Ø§Ù„Ø®Ø·ÙˆØ© 2: ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©**
Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ØŒ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:

```sql
-- ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©
SELECT 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ†:' as info;
SELECT id, email FROM auth.users LIMIT 5;

SELECT 'Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:' as info;
SELECT id, full_name, email, role FROM profiles LIMIT 10;

SELECT 'Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©:' as info;
SELECT id, driver_id, passenger_id, status FROM bookings WHERE status = 'completed' LIMIT 5;
```

### **Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª**
Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø®Ø·ÙˆØ© 2:

```sql
-- Ù…Ø«Ø§Ù„ (Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©):
INSERT INTO ratings (booking_id, driver_id, passenger_id, rating, comment) VALUES
(1, 'Ù…Ø¹Ø±Ù-Ø§Ù„Ø³Ø§Ø¦Ù‚-Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ', 'Ù…Ø¹Ø±Ù-Ø§Ù„Ø±Ø§ÙƒØ¨-Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ', 5, 'Ø³Ø§Ø¦Ù‚ Ù…Ù…ØªØ§Ø²');
```

## ðŸŽ¯ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ©:

### **Ø¬Ø¯ÙˆÙ„ ratings**:
- âœ… Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ù„ÙƒÙ„ ØªÙ‚ÙŠÙŠÙ…
- âœ… Ø±Ø¨Ø· Ù…Ø¹ Ø¬Ø¯ÙˆÙ„ `bookings`
- âœ… Ø±Ø¨Ø· Ù…Ø¹ Ø¬Ø¯ÙˆÙ„ `profiles` Ù„Ù„Ø³Ø§Ø¦Ù‚ ÙˆØ§Ù„Ø±Ø§ÙƒØ¨
- âœ… ØªÙ‚ÙŠÙŠÙ… Ù…Ù† 1 Ø¥Ù„Ù‰ 5 Ù†Ø¬ÙˆÙ…
- âœ… ØªØ¹Ù„ÙŠÙ‚ Ø§Ø®ØªÙŠØ§Ø±ÙŠ
- âœ… ØªÙˆØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ«

### **ÙÙ‡Ø§Ø±Ø³ Ø§Ù„Ø£Ø¯Ø§Ø¡**:
- âœ… ÙÙ‡Ø±Ø³ Ø¹Ù„Ù‰ `driver_id`
- âœ… ÙÙ‡Ø±Ø³ Ø¹Ù„Ù‰ `passenger_id`
- âœ… ÙÙ‡Ø±Ø³ Ø¹Ù„Ù‰ `booking_id`
- âœ… ÙÙ‡Ø±Ø³ Ø¹Ù„Ù‰ `created_at`

### **Trigger ØªÙ„Ù‚Ø§Ø¦ÙŠ**:
- âœ… ØªØ­Ø¯ÙŠØ« Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… Ø­ÙØ¸ ÙÙŠ Ø¬Ø¯ÙˆÙ„ `profiles`

## ðŸš€ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:

1. **Ø´ØºÙ„ `database/create_ratings_table.sql`** ÙÙŠ Supabase
2. **ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©** Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø£Ø¹Ù„Ø§Ù‡
3. **Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…** Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
4. **Ø§Ø®ØªØ¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù…** ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚

## ðŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©:

- âœ… Ø¬Ø¯ÙˆÙ„ `ratings` Ù…Ù†ÙØµÙ„ ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† Ø¬Ø¯ÙˆÙ„ `profiles`
- âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
- âœ… ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- âœ… Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

## ðŸŽ‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©:

Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ØŒ Ø§Ù„Ù†Ø¸Ø§Ù… Ø³ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ:
- âœ… Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù…Ù† Ø¬Ø¯ÙˆÙ„ `ratings`
- âœ… Ø­Ø³Ø§Ø¨ Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚
- âœ… Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø§ÙƒØ¨

**Ø§Ù†Ø³Ø® `database/create_ratings_table.sql` ÙÙŠ Supabase SQL Editor ÙˆØ³ØªØ­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©!** ðŸŽ‰
